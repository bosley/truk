cimport <stdio.h>;

extern fn printf(fmt: *i8, ...args): i32;

fn mixed_nested(flag: i32, ...values) : i32 {
  var a: i32 = __TRUK_VA_ARG_I32();
  var b: f64 = __TRUK_VA_ARG_F64();
  printf("flag=%d a(i32)=%d b(f64)=%f\n", flag, a, b);
  
  if flag > 0 {
    if a > b as i32 {
      printf("a > b\n");
      return a;
    } else {
      printf("a <= b\n");
      return b as i32;
    }
  } else {
    printf("flag <= 0\n");
    return a + b as i32;
  }
}

fn main() : i32 {
  return mixed_nested(1, 41, 20.0);
}
