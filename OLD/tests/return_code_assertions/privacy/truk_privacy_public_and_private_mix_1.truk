struct Account {
  username: *u8,
  email: *u8,
  _password_hash: u64,
  _session_token: u64
}

var _global_counter: i32 = 0;
var public_version: i32 = 1;

fn _hash_password(pwd: *u8) : u64 {
  return 12345;
}

fn account_create(user: *u8, email: *u8, pwd: *u8) : Account {
  _global_counter = _global_counter + 1;
  
  return Account{
    username: user,
    email: email,
    _password_hash: _hash_password(pwd),
    _session_token: 0
  };
}

fn account_verify(acc: *Account, pwd: *u8) : bool {
  var hash: u64 = _hash_password(pwd);
  return hash == (*acc)._password_hash;
}

fn main() : i32 {
  var acc: Account = account_create("alice", "alice@example.com", "secret");
  
  var valid: bool = account_verify(&acc, "secret");
  
  if valid {
    return public_version;
  }
  
  return 0;
}
