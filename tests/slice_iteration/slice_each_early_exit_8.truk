fn main() : i32 {
  var count: u64 = 5;
  var slice: []i32 = make(@i32, count);
  slice[0] = 5;
  slice[1] = 3;
  slice[2] = 8;
  slice[3] = 2;
  slice[4] = 1;
  
  var sum: i32 = 0;
  each(slice, &sum, fn(elem: *i32, ctx: *i32) : bool {
    if *elem == 8 {
      return false;
    }
    *ctx = *ctx + *elem;
    return true;
  });
  
  delete(slice);
  return sum;
}
