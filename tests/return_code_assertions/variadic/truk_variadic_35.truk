cimport <stdio.h>;

extern fn printf(fmt: *i8, ...args): i32;

fn nested_conditions(flag: i32, ...values) : i32 {
  var x: i64 = __TRUK_VA_ARG_I64();
  var y: i64 = __TRUK_VA_ARG_I64();
  printf("flag=%d x=%lld y=%lld\n", flag, x, y);
  
  if flag > 0 {
    if x > y {
      printf("Branch: flag>0 and x>y\n");
      return (x - y) as i32;
    } else {
      printf("Branch: flag>0 and x<=y\n");
      return (y - x) as i32;
    }
  } else {
    printf("Branch: flag<=0\n");
    return (x + y) as i32;
  }
}

fn main() : i32 {
  return nested_conditions(1, 50, 15);
}
