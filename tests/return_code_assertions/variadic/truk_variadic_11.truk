cimport <stdio.h>;

extern fn printf(fmt: *i8, ...args): i32;

fn average_f64(count: i32, ...nums) : i32 {
  var sum: f64 = 0.0;
  var i: i32 = 0;
  while i < count {
    var val: f64 = __TRUK_VA_ARG_F64();
    printf("Value[%d] = %f\n", i, val);
    sum = sum + val;
    i = i + 1;
  }
  var avg: f64 = sum / count as f64;
  printf("Sum=%f Count=%d Average=%f\n", sum, count, avg);
  return avg as i32;
}

fn main() : i32 {
  return average_f64(3, 10.0, 11.0, 12.0);
}
