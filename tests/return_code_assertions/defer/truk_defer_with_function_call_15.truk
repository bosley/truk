fn handler(x: i32) : i32 {
  return x + 10;
}

fn with_defer(h: fn(i32) : i32) : i32 {
  var resource: i32 = 5;
  
  defer {
    resource = 999;
  }
  
  return h(resource);
}

fn main() : i32 {
  return with_defer(handler);
}
