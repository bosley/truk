fn main() : i32 {
  var count: u64 = 3;
  var slice: []i32 = make(@i32, count);
  slice[0] = 2;
  slice[1] = 3;
  slice[2] = 4;
  
  var sum: i32 = 0;
  each(slice, &sum, fn(elem: *i32, ctx: *i32) : bool {
    var i: i32 = 0;
    while i < *elem {
      *ctx = *ctx + 1;
      i = i + 1;
    }
    return true;
  });
  
  delete(slice);
  return sum + 36;
}
