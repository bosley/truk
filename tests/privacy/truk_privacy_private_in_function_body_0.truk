struct Buffer {
  data: []u8,
  capacity: u64,
  _len: u64
}

fn buffer_append(buf: *Buffer, value: u8) : void {
  buf.data[buf._len] = value;
  buf._len = buf._len + 1;
}

fn buffer_len(buf: *Buffer) : u64 {
  return buf._len;
}

fn main() : i32 {
  var buf: Buffer = Buffer{
    data: make(@u8, 10),
    capacity: 10,
    _len: 0
  };
  
  buffer_append(&buf, 42);
  buffer_append(&buf, 43);
  
  var len: u64 = buffer_len(&buf);
  
  delete(buf.data);
  
  return len as i32;
}
