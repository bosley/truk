fn main() : i32 {
  var m: map[i32] = make(@map[i32]);
  m["x"] = 10;
  m["y"] = 21;
  m["z"] = 30;
  m["w"] = 11;
  
  var sum: i32 = 0;
  each(m, &sum, fn(key: *u8, val: *i32, ctx: *i32) : void {
    if val != nil {
      if *val > 20 {
        *ctx = *ctx + *val;
      }
    }
  });
  
  delete(m);
  return sum - 9;
}