struct Inner {
  value: i32
}

struct Outer {
  inner: Inner,
  extra: i32
}

fn main() : i32 {
  var m: map[Outer] = make(@map[Outer]);
  
  var inner1: Inner = Inner{value: 40};
  var outer1: Outer = Outer{inner: inner1, extra: 8};
  
  m["data"] = outer1;
  
  var ptr: *Outer = m["data"];
  if ptr != nil {
    var result: i32 = (*ptr).inner.value + (*ptr).extra;
    delete(m);
    return result;
  }
  
  delete(m);
  return 0;
}
